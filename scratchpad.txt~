

 ***  A scrathpad for crosstab calculations *** 
>>> keylist = []

>>> f = open('testdata.csv', 'r')

>>> f = open('testdata.csv', 'r').readlines()
>>> keystring = f[0].rstrip('\n')
>>> keystring
'region,colour,count'

>>> keylist = list(f[0].rstrip('\n').split(','))
>>> keylist
['region', 'colour', 'count']

>>> def makelist(name):
...    name = []

>>> keydict = {}

>>> for word in keys:
...   keydict[word] = []
... 
>>> keydict
{'count': [], 'region': [], 'colour': []}

>>> f = open('testdata.csv', 'r')
>>> g = f.readlines()
>>> g
['region,colour,count\n', 'northern,red,20\n', 'northern,red,40\n', 'northern,red,25\n', 'northern,red,12\n', 'northern,blue,37\n', 'northern,blue,124\n', 'northern,blue,42\n', 'western,red,37\n', 'western,red,46\n', 'western,red,51\n', 'western,blue,11\n', 'western,blue,78\n', 'western,blue,145\n']
>>> g[0]
'region,colour,count\n'
>>> g[1]
'northern,red,20\n'
>>> b = list(g[0].split(',') )
>>> b
['region', 'colour', 'count\n']
>>> 

>>> a = ["foo", "bar", "baz", "abc", "def"]
>>> b = ["sydney", "vancouver", "calgary", "anchorage", "wellington", "dunedin"]
>>> import itertools
>>> c = itertools.product(a, b)
>>> c
<itertools.product object at 0xb7d91be4>
>>> c.next()
('foo', 'sydney')
>>> c.next()
('foo', 'vancouver')
>>> c.next()
('foo', 'calgary')
>>> c.next()
('foo', 'anchorage')

>>> a = list(f[0].rstrip('\n').split(',') )
>>> a
['region', 'colour', 'count'] 

*** Breakthrough 1 - making each row a list ***  
>>> x = [ ] 
>>> for line in f: 
...   x.append(list(line.rstrip('\n').split(',') ))
... 
>>> x
[['region', 'colour', 'count'], ['northern', 'red', '20'], ['northern', 'red', '40'], ['northern', 'red', '25'], ['northern', 'red', '12'], ['northern', 'blue', '37'], ['northern', 'blue', '124'], ['northern', 'blue', '42'], ['western', 'red', '37'], ['western', 'red', '46'], ['western', 'red', '51'], ['western', 'blue', '11'], ['western', 'blue', '78'], ['western', 'blue', '145']]
>>> x[0]
['region', 'colour', 'count']
>>> x[1]
['northern', 'red', '20'] 

*** Breakthrough 2  - how to get columns *** 
>>> cols = zip(*x[0:len(x)]) 

NOTE - this simpler version is even better (and gives the same result)  
>>> cols = zip(*x)

>>> cols
[('region', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'western', 'western', 'western', 'western', 'western', 'western'), ('colour', 'red', 'red', 'red', 'red', 'blue', 'blue', 'blue', 'red', 'red', 'red', 'blue', 'blue', 'blue'), ('count', '20', '40', '25', '12', '37', '124', '42', '37', '46', '51', '11', '78', '145')] 

>>> cols[0]
('region', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'western', 'western', 'western', 'western', 'western', 'western')

>>> cols[1]
('colour', 'red', 'red', 'red', 'red', 'blue', 'blue', 'blue', 'red', 'red', 'red', 'blue', 'blue', 'blue')

>>> cols[2]
('count', '20', '40', '25', '12', '37', '124', '42', '37', '46', '51', '11', '78', '145')

>>> list(cols[0])
['region', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'western', 'western', 'western', 'western', 'western', 'western']


Now, it should be possible to use zip to scan down through the lists and get the totals for each value-combination of the row and column 
variables.  

>>> l = ['test', '23', '45', '68']

>>> a = [int(x) for x in l[1:] ]
>>> a
[23, 45, 68]

>>> list(keylist[0].split(','))
['region']

>>> test = []
>>> for word in keylist:
...    test.append(list(str(word).split(',') ) )
... 
>>> test
[['region'], ['colour'], ['count']] 

>>> test = []
>>> for word in x[0]:
...   test.append(list(str(word).split(',') ) ) 
... 
>>> test
[['region'], ['colour'], ['count']]
>>>

>>> for tuple in test:
...    foo = list(tuple)
... 
>>> foo
['count', '20', '40', '25', '12', '37', '124', '42', '37', '46', '51', '11', '78', '145']

>>> a = []
>>> for tuple in test:
...    a.append(list(tuple))   
... 
>>> a
[['region', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'western', 'western', 'western', 'western', 'western', 'western'], ['colour', 'red', 'red', 'red', 'red', 'blue', 'blue', 'blue', 'red', 'red', 'red', 'blue', 'blue', 'blue'], ['count', '20', '40', '25', '12', '37', '124', '42', '37', '46', '51', '11', '78', '145']]
>>>

>>> a[0]
['region', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'western', 'western', 'western', 'western', 'western', 'western']
>>> a[0][0]
'region'
>>> a[1][0]
'colour'
>>> a[2][0]
'count'
>>>

>>> d = {}

>>> d.update({a[0][0]: a[0][1:]})
>>> d
{'region': ['northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'western', 'western', 'western', 'western', 'western', 'western']}

>>> d.update({a[1][0]: a[1][1:]})
>>> d
{'region': ['northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'western', 'western', 'western', 'western', 'western', 'western'], 'colour': ['red', 'red', 'red', 'red', 'blue', 'blue', 'blue', 'red', 'red', 'red', 'blue', 'blue', 'blue']}

>>> d.update({a[2][0]: a[2][1:]})
>>> d
{'count': ['20', '40', '25', '12', '37', '124', '42', '37', '46', '51', '11', '78', '145'], 'region': ['northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'northern', 'western', 'western', 'western', 'western', 'western', 'western'], 'colour': ['red', 'red', 'red', 'red', 'blue', 'blue', 'blue', 'red', 'red', 'red', 'blue', 'blue', 'blue']}
>>>

























